# jar2docker - JAR åŒ…ä¸€é”®è½¬ Docker é•œåƒå·¥å…·

ä¸€ä¸ªè½»é‡çº§ Web å·¥å…·ï¼Œå°†ä¸Šä¼ çš„ Java JAR æ–‡ä»¶é€šè¿‡ Web ç•Œé¢ä¸€é”®æ„å»ºæˆ Docker é•œåƒã€‚é€‚åˆå¼€å‘ã€æµ‹è¯•ç¯å¢ƒå¿«é€Ÿæ‰“åŒ…éƒ¨ç½²ï¼Œæ”¯æŒæ¨¡æ¿åŒ–æ„å»ºä¸åŸºæœ¬è®¤è¯ã€‚

![](img.png) <!-- å¯é€‰ï¼šæ·»åŠ æˆªå›¾ -->

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

- âœ… **Web å›¾å½¢åŒ–æ“ä½œ**ï¼šæ— éœ€å‘½ä»¤è¡Œï¼Œæ‹–æ‹½ä¸Šä¼  JAR æ–‡ä»¶
- âœ… **è‡ªåŠ¨é•œåƒå‘½å**ï¼šæ ¹æ® JAR æ–‡ä»¶åæ™ºèƒ½ç”Ÿæˆæ¨èé•œåƒåï¼ˆå¦‚ `myapp/demo-service`ï¼‰
- âœ… **åˆ·æ–°æŒ‰é’®**ï¼šä¸€é”®é‡æ–°ç”Ÿæˆæ¨èåç§°
- âœ… **æ¨¡æ¿åŒ–æ„å»º**ï¼š`templates/` ç›®å½•ä¸‹ `.Dockerfile` æ–‡ä»¶è‡ªåŠ¨åŠ è½½ä¸ºæ¨¡æ¿
- âœ… **HTTP Basic è®¤è¯**ï¼šå…¨å±€ä¿æŠ¤ï¼Œé˜²æ­¢æœªæˆæƒè®¿é—®
- âœ… **å®¹å™¨åŒ–éƒ¨ç½²**ï¼šè‡ªèº«å¯è¿è¡Œåœ¨ Docker å®¹å™¨ä¸­ï¼Œè°ƒç”¨å®¿ä¸»æœº Docker API
- âœ… **é›¶ä¾èµ–é…ç½®**ï¼šé¦–æ¬¡è¿è¡Œè‡ªåŠ¨ç”Ÿæˆ `config.yml` å’Œé»˜è®¤æ¨¡æ¿

## ğŸ“¦ é¡¹ç›®ç»“æ„
```
jar2docker/
â”œâ”€â”€ jar2docker.py            # ä¸»ç¨‹åºï¼ˆPython HTTP æœåŠ¡ï¼‰
â”œâ”€â”€ templates/               # Dockerfile æ¨¡æ¿ç›®å½•ï¼ˆè‡ªåŠ¨åŠ è½½ï¼‰
â”‚   â”œâ”€â”€ simple.Dockerfile
â”‚   â”œâ”€â”€ springboot.Dockerfile
â”‚   â””â”€â”€ ...
â”œâ”€â”€ uploads/                 # ä¸´æ—¶å­˜å‚¨ä¸Šä¼ çš„ JAR æ–‡ä»¶
â”œâ”€â”€ docker_build/            # æ„å»ºä¸Šä¸‹æ–‡ç›®å½•
â”œâ”€â”€ config.yml               # é…ç½®æ–‡ä»¶ï¼ˆé¦–æ¬¡è¿è¡Œè‡ªåŠ¨ç”Ÿæˆï¼‰
â”œâ”€â”€ index.html               # å‰ç«¯é¡µé¢
â”œâ”€â”€ requirements.txt         # Python ä¾èµ–
â”œâ”€â”€ Dockerfile               # å®¹å™¨åŒ–éƒ¨ç½²æ–‡ä»¶
â””â”€â”€ README.md                # æœ¬æ–‡ä»¶
```


## âš™ï¸ å¿«é€Ÿå¼€å§‹ï¼ˆæœ¬åœ°è¿è¡Œï¼‰

### 1. å‡†å¤‡ç¯å¢ƒ

ç¡®ä¿å·²å®‰è£…ï¼š
- Python 3.8+ï¼ˆæ¨èä½¿ç”¨ [python.org](https://www.python.org/) å®˜æ–¹å®‰è£…åŒ…ï¼Œé¿å… `distutils` ç¼ºå¤±ï¼‰
- Dockerï¼ˆç”¨äºæ„å»ºé•œåƒï¼‰
- `pip`

### 2. å®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt

python jar2docker.py

```
### 2. æ„å»ºå®¹å™¨
```bash
docker build -t jar2docker .

```

### 3. ç›´æ¥ä½¿ç”¨
```bash
docker run -d \
  -p 8000:8000 \
  -v /var/run/docker.sock:/var/run/docker.sock \
  --name jar2docker \
  registry.cn-shanghai.aliyuncs.com/51jbm/jar2docker
```
